<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marble Racing</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="container">
    <h1>Marble Racing</h1>

    <section id="join">
      <form id="joinForm">
        <input id="username" maxlength="24" placeholder="Enter username" required />
        <button type="submit">Join Next Race</button>
      </form>
      <div id="joinMsg" class="msg"></div>
    </section>

    <section id="countdown">
      <h2>Next race starts in</h2>
      <div id="timer" class="timer">--:--</div>
      <button id="startNow" style="display:none;margin-top:8px">Start Race Now</button>
    </section>

    <section id="lobby" class="panel">
      <h2>Lobby</h2>
      <ul id="users"></ul>
    </section>

    <section id="race" class="panel">
      <h2>Race</h2>
      <div id="track"></div>
      <ol id="finish"></ol>
    </section>
  </div>

  <script src="/main.js" type="module"></script>
  <script>
    // Keep page active on mobile
    document.addEventListener('touchstart', function(){}, {passive:true});
  </script>
</body>
<style>
  /* Minimal inline fallback styles if CSS fails to load */
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; background:#0f172a; color:#e2e8f0 }
  .container { max-width: 900px; margin: 0 auto; padding: 24px }
  h1 { margin: 0 0 16px 0 }
  section { margin: 16px 0 }
  #joinForm { display:flex; gap:8px }
  #username { flex:1; padding:10px; border-radius:8px; border:none }
  button { padding:10px 14px; border-radius:8px; border:none; background:#22c55e; color:#062; font-weight:600; cursor:pointer }
  .panel { background:#111827; padding:16px; border-radius:12px; border:1px solid #1f2937 }
  #track { margin-top:8px }
  .lane { display:flex; align-items:center; gap:8px; margin:8px 0 }
  .name { width:160px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
  .bar { flex:1; background:#1f2937; border-radius:999px; position:relative; height:18px }
  .marble { position:absolute; top:2px; left:2px; width:14px; height:14px; border-radius:50%; background:#60a5fa; box-shadow:0 0 0 2px #93c5fd inset }
  .finish { margin-top:8px }
  .timer { font-size: 32px; font-weight:700 }
  .msg { min-height: 20px }
</style>
</html>


